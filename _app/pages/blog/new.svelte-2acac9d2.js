import{S as t,i as e,s as o,e as s,c as a,a as n,d as r,b as l,f as i,_ as c,L as d,t as u,k as f,Q as p,g as h,n as v,H as m,M as g,I as y,U as x,W as w,A as b}from"../../chunks/vendor-06bf550c.js";import{u as E}from"../../chunks/user-bd305a64.js";import{r as I}from"../../chunks/singletons-12a22614.js";const P=I,k=async function(t,e){return P.goto(t,e,[])};function T(t){let e,o,u;return{c(){e=s("textarea"),this.h()},l(t){e=a(t,"TEXTAREA",{id:!0,name:!0,autocomplete:!0,class:!0,placeholder:!0}),n(e).forEach(r),this.h()},h(){l(e,"id","password"),l(e,"name","password"),l(e,"autocomplete","current-password"),e.required=!0,l(e,"class"," transition relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-lg focus:outline-none focus:ring-2 focus:ring-accent sm:text-sm h-64 shadow"),l(e,"placeholder","Post Content")},m(s,a){i(s,e,a),c(e,t[2]),o||(u=d(e,"input",t[10]),o=!0)},p(t,o){4&o&&c(e,t[2])},d(t){t&&r(e),o=!1,u()}}}function j(t){let e,o,w,b,E,I,P,k,j,A,D,S,V,N,B,C,L,U,O,M,q,z,H,$,_,J,R,F,Q,W,X,G,K,Y,Z,tt,et,ot,st,at,nt,rt,lt=t[3]&&T(t);return{c(){e=s("div"),o=s("div"),w=s("div"),b=s("h2"),E=u("Create A New Post"),I=f(),P=s("p"),k=u("Make Sure to fill out all the fields!"),j=f(),A=s("form"),D=s("input"),S=f(),V=s("div"),N=s("div"),B=s("label"),C=u("Email address"),L=f(),U=s("input"),O=f(),M=s("div"),q=s("label"),z=u("Password"),H=f(),$=s("input"),_=f(),J=s("div"),R=s("label"),F=u("Password"),Q=f(),W=s("div"),X=s("button"),G=u("Editor"),K=f(),lt&&lt.c(),Y=f(),Z=s("div"),tt=s("button"),et=s("span"),ot=p("svg"),st=p("path"),at=u("\n\t\t\t\t\tCreate Post"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=n(e);o=a(s,"DIV",{class:!0});var l=n(o);w=a(l,"DIV",{});var i=n(w);b=a(i,"H2",{class:!0});var c=n(b);E=h(c,"Create A New Post"),c.forEach(r),I=v(i),P=a(i,"P",{class:!0});var d=n(P);k=h(d,"Make Sure to fill out all the fields!"),d.forEach(r),i.forEach(r),j=v(l),A=a(l,"FORM",{class:!0});var u=n(A);D=a(u,"INPUT",{type:!0,name:!0}),S=v(u),V=a(u,"DIV",{class:!0});var f=n(V);N=a(f,"DIV",{});var p=n(N);B=a(p,"LABEL",{class:!0});var m=n(B);C=h(m,"Email address"),m.forEach(r),L=v(p),U=a(p,"INPUT",{class:!0,placeholder:!0}),p.forEach(r),O=v(f),M=a(f,"DIV",{});var g=n(M);q=a(g,"LABEL",{class:!0});var y=n(q);z=h(y,"Password"),y.forEach(r),H=v(g),$=a(g,"INPUT",{class:!0,placeholder:!0}),g.forEach(r),_=v(f),J=a(f,"DIV",{class:!0});var x=n(J);R=a(x,"LABEL",{for:!0,class:!0});var T=n(R);F=h(T,"Password"),T.forEach(r),Q=v(x),W=a(x,"DIV",{class:!0});var nt=n(W);X=a(nt,"BUTTON",{type:!0,class:!0});var rt=n(X);G=h(rt,"Editor"),rt.forEach(r),nt.forEach(r),K=v(x),lt&&lt.l(x),x.forEach(r),f.forEach(r),Y=v(u),Z=a(u,"DIV",{});var it=n(Z);tt=a(it,"BUTTON",{type:!0,class:!0});var ct=n(tt);et=a(ct,"SPAN",{class:!0});var dt=n(et);ot=a(dt,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var ut=n(ot);st=a(ut,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),n(st).forEach(r),ut.forEach(r),dt.forEach(r),at=h(ct,"\n\t\t\t\t\tCreate Post"),ct.forEach(r),it.forEach(r),u.forEach(r),l.forEach(r),s.forEach(r),this.h()},h(){l(b,"class","mt-6 text-center text-3xl font-extrabold text-gray-900"),l(P,"class","mt-2 text-center text-sm text-gray-600"),l(D,"type","hidden"),l(D,"name","remember"),D.value="true",l(B,"class","sr-only"),U.required=!0,l(U,"class"," transition relative block w-full px-3 py-2 border border-gray-30 placeholder-gray-500 my-2 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent sm:text-sm shadow"),l(U,"placeholder","Post Title"),l(q,"class","sr-only"),$.required=!0,l($,"class"," transition relative block w-full px-3 py-2 border border-gray-30 placeholder-gray-500 text-gray-900 rounded-lg my-2 focus:outline-none focus:ring-2 focus:ring-accent sm:text-sm shadow"),l($,"placeholder","Post Description"),l(R,"for","password"),l(R,"class","sr-only"),l(X,"type","button"),l(X,"class","w-full border-accent  rounded-t-lg p-2  transition duration-300 border-b-2"),l(W,"class","w-full flex "),l(J,"class","mt-2"),l(V,"class","rounded-md -space-y-px"),l(st,"fill-rule","evenodd"),l(st,"d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"),l(st,"clip-rule","evenodd"),l(ot,"class","h-5 w-5 text-accent group-hover:text-accent"),l(ot,"xmlns","http://www.w3.org/2000/svg"),l(ot,"viewBox","0 0 20 20"),l(ot,"fill","currentColor"),l(ot,"aria-hidden","true"),l(et,"class","absolute left-0 inset-y-0 flex items-center pl-3"),l(tt,"type","submit"),l(tt,"class","group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-accent hover:bg-accent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent"),l(A,"class","mt-8 space-y-6"),l(o,"class","max-w-md w-full space-y-8"),l(e,"class","min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8")},m(s,a){i(s,e,a),m(e,o),m(o,w),m(w,b),m(b,E),m(w,I),m(w,P),m(P,k),m(o,j),m(o,A),m(A,D),m(A,S),m(A,V),m(V,N),m(N,B),m(B,C),m(N,L),m(N,U),c(U,t[0]),m(V,O),m(V,M),m(M,q),m(q,z),m(M,H),m(M,$),c($,t[1]),m(V,_),m(V,J),m(J,R),m(R,F),m(J,Q),m(J,W),m(W,X),m(X,G),m(J,K),lt&&lt.m(J,null),m(A,Y),m(A,Z),m(Z,tt),m(tt,et),m(et,ot),m(ot,st),m(tt,at),nt||(rt=[d(U,"input",t[7]),d($,"input",t[8]),d(X,"click",t[9]),d(A,"submit",g(t[5]))],nt=!0)},p(t,[e]){1&e&&U.value!==t[0]&&c(U,t[0]),2&e&&$.value!==t[1]&&c($,t[1]),t[3]?lt?lt.p(t,e):(lt=T(t),lt.c(),lt.m(J,null)):lt&&(lt.d(1),lt=null)},i:y,o:y,d(t){t&&r(e),lt&&lt.d(),nt=!1,x(rt)}}}var A=function(t,e,o,s){return new(o||(o=Promise))((function(a,n){function r(t){try{i(s.next(t))}catch(e){n(e)}}function l(t){try{i(s.throw(t))}catch(e){n(e)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,l)}i((s=s.apply(t,e||[])).next())}))};const D=({fetch:t,page:{query:e}})=>A(void 0,void 0,void 0,(function*(){const o=e.get("edit");if(o){const e=yield t("http://localhost:1337/posts/"+o);if(404===e.status){return{status:404,error:new Error(`The post with ID ${o} was not found`)}}{const t=yield e.json();return{props:{editId:o,title:t.title,content:t.content,description:t.description}}}}return{props:{}}}));function S(t,e,o){let s;w(t,E,(t=>o(11,s=t)));var a=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(a,n){function r(t){try{i(s.next(t))}catch(e){n(e)}}function l(t){try{i(s.throw(t))}catch(e){n(e)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,l)}i((s=s.apply(t,e||[])).next())}))};let{editId:n}=e,{title:r=""}=e,{description:l=""}=e,{content:i=""}=e;b((()=>{s||k("/blog/login")}));let c=!0,d=!0;return t.$$set=t=>{"editId"in t&&o(6,n=t.editId),"title"in t&&o(0,r=t.title),"description"in t&&o(1,l=t.description),"content"in t&&o(2,i=t.content)},[r,l,i,c,d,function(){var t,e,o,s;return a(this,void 0,void 0,(function*(){if(!localStorage.getItem("token"))return void k("/login");if(n)return void function(){var t,e,o,s;a(this,void 0,void 0,(function*(){if(!localStorage.getItem("token"))return void k("/login");const a=yield fetch("http://localhost:1337/posts/"+n,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({title:r,description:l,content:i})});if(a.ok){const t=yield a.json();k("/blog/"+t.id)}else{const n=yield a.json();(null===(s=null===(o=null===(e=null===(t=null==n?void 0:n.message)||void 0===t?void 0:t[0])||void 0===e?void 0:e.messages)||void 0===o?void 0:o[0])||void 0===s?void 0:s.message)&&alert(n.message[0].messages[0].message)}}))}();const c=yield fetch("http://localhost:1337/api/posts",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({title:r,description:l,content:i})});if(c.ok){const t=yield c.json();k("/blog/"+t.id)}else{const a=yield c.json();(null===(s=null===(o=null===(e=null===(t=null==a?void 0:a.message)||void 0===t?void 0:t[0])||void 0===e?void 0:e.messages)||void 0===o?void 0:o[0])||void 0===s?void 0:s.message)&&alert(a.message[0].messages[0].message)}}))},n,function(){r=this.value,o(0,r)},function(){l=this.value,o(1,l)},()=>{o(3,c=!0),o(4,d=!0)},function(){i=this.value,o(2,i)}]}class V extends t{constructor(t){super(),e(this,t,S,j,o,{editId:6,title:0,description:1,content:2})}}export{V as default,D as load};
